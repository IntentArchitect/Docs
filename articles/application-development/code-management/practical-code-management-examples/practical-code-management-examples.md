---
uid: application-development.code-weaving-and-generation.practical-code-management-examples
---

# Practical C# Code Management Examples

This guide provides practical examples for common code management scenarios in Intent Architect. Each example demonstrates how to handle real-world situations where you need to customize or extend generated code.

For a comprehensive explanation of code management concepts, see the [C# Code Management](xref:application-development.code-weaving-and-generation.about-code-management-csharp) documentation.

## Code Management Modes

Source code can fall into one of three categories, describing how it is managed by Intent Architect:

- **Fully**: Intent Architect has full control over the particular code block and any deviations from the generated output will be overwritten.
- **Ignore**: Intent Architect has zero control over the particular code block, which is 100% owned and managed by the developer. Intent Architect will not make any changes to the code block.
- **Merge**: Intent Architect will add and remove Intent Architect generated code for the the code block, but will never remove code which was manually added by the developer.

---

## When to use Code Management

The various code management techniques described below, can be leveraged when:

- you want to put an exception or small tweak into the pattern output by Intent Architect.
- you want to extend the code which Intent Architect is generating.
- you want to completely customized the code Intent Architect is generating, either in an isolated fashion, or by opening the code up for broader changes.

The techniques can be applied in a number of ways depending on what you want to do, and the intention you want to convey with the code management applied.

---

## Choosing the Right Code Management Technique

Intent Architect provides multiple code management techniques: `[IntentIgnore]`, `[IntentManaged(Mode.Ignore)]`, `// IntentIgnore` (along with the other variants). The choice depends on where you're applying the instruction:

- **Attribute-based technique** (e.g., `[IntentIgnore]` or `[IntentManaged(Mode.Ignore)]`) - this should be the default technique, and used most of the time (such as above classed, methods, properties or any other C# element that support attributes)

- **Comment-based techniques** (e.g., `// IntentIgnore`) - this should only be used when a C# attribute is not supported (such as inside method bodies or above individual lines of code)

> NOTE  
Each file generated by Intent Architect will also have a `DefaultIntentManaged[]` attribute defined at the top of the page. This indicates the default instruction for the entire page and can then be overwritten at lower levels - either by modifying the existing code management attribute on the relevant code block (class, method etc), if present, or by adding it if not present.

---

## Practical Examples

### Intent Architect wants to remove my method

**Scenario:** You've manually added a method to a class, but Intent Architect wants to remove it during the Software Factory execution.

![Method removal](images/method-removal.png)

**Cause:** The class is fully managed (`[IntentManaged(Mode.Fully, Signature = Mode.Fully)]`), and Intent Architect doesn't recognize the custom method as part of the template output.

#### Solution 1: Apply Method-Level Ignore Attribute

**Use when:** you want to keep individual custom method(s) while keeping the class fully managed or when the intention you want to convey is that the class is _not open_ for extension generally.

Add the `[IntentIgnore]` attribute above the custom method:

[!code-csharp[](images/method-ignore.cs?highlight=1)]

#### Solution 2: Use Class-Level Merge Mode

**Use when:** you are adding multiple custom methods to the same class or when you want the intention you want to convey is that the class is _generally open_ for extension with custom methods.

Change the class-level attribute to `[IntentManaged(Mode.Merge, Signature = Mode.Fully)]`. This instructs Intent Architect to merge generated methods with any developer-added methods.

[!code-csharp[](images/class-merge.cs?highlight=1)]

---

### Intent Architect wants to remove my custom code from a method

**Scenario:** You want to add custom code to an Intent Architect generated method, but Intent Architect wants to remove it during the Software Factory execution.

![Code Line removal](images/code-line-removal.png)

**Cause:** The method body is fully managed (`[IntentManaged(Mode.Fully, Body = Mode.Fully)]`), and Intent Architect doesn't recognize the custom code as part of the template output.

#### Solution 1: Use Method Body Merge Mode

**Use when:** you are adding multiple custom lines throughout a method body or when the intention you want to convey is that the method is _generally open_ for extension, and you anticipate it will be extended.

Change the method attribute to `[IntentManaged(Mode.Fully, Body = Mode.Merge)]`. This instructs Intent Architect to merge generated code with custom code within the method body. The method signature and attributes remain fully managed.

[!code-csharp[](images/method-body-merge.cs?highlight=1)]

#### Solution 2: Use Statement-Level Ignore

**Use when:** you want to preserve specific lines of custom code while keeping the method body fully managed or when the intention you want to convey is that the method is _not_ open for extension generally.  

If you are required to add multiple lines to a method, but still want to convey the method is not open for extension generally, an option is to extract the multiple lines of code into their own method, and add a single line to the Intent Architect generated method, invoking the new custom method.

Add the `// IntentIgnore` comment above the specific line or block you want to preserve. Since attributes cannot be applied to individual statements, the comment-based approach is required.

[!code-csharp[](images/statement-ignore.cs?highlight=4)]

Even though the body remains in `Fully` mode, the `// IntentIgnore` comment overrides management for that specific statement.

---

### I want to add to a code block generated by Intent Architect

**Scenario:** You need to add statements to a code block generated by Intent Architect, but the additions are removed during Software Factory execution.

![Adding a custom code line](images/custom-code-line-add.png)

> [!NOTE]
> This example covers _adding statements_ to a generated block. For _modifying existing statements_, see [Updating Generated Code Blocks](#i-want-to-update-a-code-block-generated-by-intent-architect).

#### Solution 1: Method Body Merge Mode

**Use when** you are adding multiple custom statements across the method or when the intention you want to convey is that the method is generally open for extension and you expect it to be extended substantially.

Change the method attribute to `[IntentManaged(Mode.Fully, Body = Mode.Merge)]`. This allows Intent Architect to merge generated code with custom additions throughout the method body.

[!code-csharp[](images/code-block-add-merge.cs?highlight=1)]

#### Solution 2: Use Statement Block Merge

**Use when:** you want to add a statement(s) to a specific code block while keeping other parts of the method fully managed and when the intention you want to convey is that the method is _not_ open for extension generally.

Add the `// IntentMerge` comment above the specific code block. This instructs Intent Architect to merge generated statements with your additions within that block only.

[!code-csharp[](images/code-block-add-merge-comment.cs?highlight=7)]

---

### I want to update a code block generated by Intent Architect

**Scenario:** You need to modify a statement within a code block generated by Intent Architect, but the changes are reverted during Software Factory execution.

![Updated a generated code line](images/custom-code-line-update.png)

**Cause:** When you modify an existing generated statement (like changing `x => x.Active && x.Qty > 0`), Intent Architect cannot merge the code because the statement itself is being replaced, not added to.

> [!NOTE]
> This example covers _modifying existing statements_. For _adding new statements_, see [Adding to Generated Code Blocks](#i-want-to-add-to-a-code-block-generated-by-intent-architect).

#### Solution: Use Statement-Level Ignore

**Use when:**: you need to modify a code block generated by Intent Architect and when the intention you want to convey is that the method is _not_ open for extension generally.

Add the `// IntentIgnore` comment above the modified statement to preserve your changes:

[!code-csharp[](images/code-block-update-ignore.cs?highlight=4)]

You can apply this to individual statements within larger blocks. In the example below, only the `Description = GetProductDescription(request),` line is ignored:

[!code-csharp[](images/code-block-update-ignore-2.cs?highlight=11)]

---

### I want to add to a method chain generated by Intent Architect

**Scenario:** You need to add a method call to a fluent method chain generated by Intent Architect, but the addition is removed during Software Factory execution.

![Method chain update](images/statement-chain-add.png)

#### Solution: Use Inline Ignore Comment

**Use when:**: you need to add a specific method call to fluent method chain while keeping other parts of the chain managed by Intent Architect.

Add the `// IntentIgnore` comment before the specific method call you want to preserve within the chain:

[!code-csharp[](images/chain-ignore.cs?highlight=2)]

---

### I want to override a statement Intent Architect generated with my own statement

**Scenario:** You want to replace a line of code generated by Intent Architect, with your own code, but the modification is being undone during the Software Factory execution.

![Ignore Match](images/ignore-match.png)

#### Solution: Use Inline Ignore Comment with Match

**Use when**: you want to replace a line of code that Intent Architect has generated with a custom line of code, but want to keep the rest of the method as fully managed.

Add the `// IntentIgnore` comment before the specific line you want to replace, but with a `Match` method call - this specifies which generated line of code you want your line to replace.

The `// IntentIgnore(Match="var products = ")` instructions specifies: The following line should be ignored by the Software Factory, and it will replace a line of generated code which starts with "var products = ".

[!code-csharp[](images/ignore-match.cs?highlight=4)]
